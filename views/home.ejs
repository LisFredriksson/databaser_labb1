<!DOCTYPE html>
<html lang="en">
    <%- include('./partials/head.ejs') %>
<body>
    <%- include('./partials/nav.ejs') %>
    <%- include('./partials/hero.ejs') %>

<div class="books-container">
        <% book.forEach(book => { %>
        <a class="single-book-link" href="http://localhost:3001/books/<%= book.book_id %>">
            <div class="book-div">
            <img src="<%= book.image %>" class="book-image">
            <h3 class="book-title"><%= book.title %></h3>
            <% author.forEach(author => { %>
                <% if (book.author_id === author.author_id) { %>
                <p class="book-details"><b><%= author.name %></b></p>
        <%}%>
        <% }) %>
                <% genre.forEach(genre => { %>
                    <% if (book.genre_id === genre.genre_id) { %>
                    <p class="book-details">Genre: <%= genre.name %></p>
            <%}%>
            <% }) %>
            <p class="book-details">Sidor: <%= book.pages %></p>
            <p class="book-details">Rating: <%= book.rating %></p>
        </div>
        </a>
        <% }) %>
    </div>


    <script>

              const btnSearch = document.querySelector('#searchBtn');
              let keyword = document.querySelector('#keyword');

btnSearch.addEventListener('click', () => {

let keyword = document.querySelector('#keyword').value;

const options = {
method: 'GET',
headers: {
    'Accept': 'application/json'
}}
let response = fetch('http://localhost:3001/?' + new URLSearchParams({
    keyword: keyword
}), options)
.catch(error => {
    console.error(error);
});

window.location.replace("http://localhost:3001/?keyword="+keyword)

});
    </script>
</body>
</html>
